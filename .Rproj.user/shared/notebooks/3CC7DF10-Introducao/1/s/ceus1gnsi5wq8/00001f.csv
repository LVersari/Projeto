"0","library(dplyr)"
"0","library(rnaturalearthhires)"
"0",""
"0","library(rnaturalearth)"
"0",""
"0","library(tidyverse)"
"0",""
"0","library(sf)"
"0",""
"0","library(ggiraph)"
"0",""
"0","conflict_prefer(""filter"", ""dplyr"")"
"0","conflict_prefer(""lag"", ""dplyr"")"
"0",""
"0","# Função para converter graus, minutos e segundos para graus decimais"
"0","dms_to_decimal <- function(dms, direction) {"
"0","  dms_split <- str_split(dms, ""[°′”’\""]"")[[1]]"
"0","  degrees <- as.numeric(dms_split[1])"
"0","  minutes <- as.numeric(dms_split[2])"
"0","  seconds <- as.numeric(dms_split[3])"
"0","  decimal <- degrees + minutes / 60 + seconds / 3600"
"0","  if (direction %in% c(""S"", ""W"")) {"
"0","    decimal <- -decimal"
"0","  }"
"0","  return(decimal)"
"0","}"
"0",""
"0","# Dados das fazendas"
"0","fazendas <- data.frame("
"0","  nome = c(""1, 2 e 3 - Sapezal - MT"", ""4 - Sapezal - MT"", ""5 - Sapezal - MT"", ""6 - Diamantino - MT"", ""7 - Santa Terezinha - MT"", "
"0","           ""8 - Matupa - MT"", ""9 - Querência - MT""),"
"0","  cidade = c(""Sapezal - MT"", ""Sapezal - MT"", ""Sapezal - MT"", ""Diamantino - MT"", ""Santa Terezinha - MT"", ""Matupá-MT"", ""Querência - MT""),"
"0","  lat = c(""13°03’59”S"", ""13°49’24”S"", ""13°32’23”S"", ""14°10’49”S"", ""10°17”20”S"", "
"0","          ""10°7’27,6”S"", ""12°20’27”S""),"
"0","  lon = c(""58°38’14”W"", ""58°45’35”W"", ""58°42’47”W"", ""56°32’46”W"", ""50°47’53”W"", ""54°58’33”W"", ""52°22’45”W"")"
"0",")"
"0",""
"0","# Converter coordenadas para graus decimais"
"0","fazendas <- fazendas |> "
"0","  mutate(lat_decimal = mapply(dms_to_decimal, str_replace_all(lat, ""[^0-9°′”’\""]"", """"), ifelse(grepl(""S"", lat), ""S"", ""N"")),"
"0","         lon_decimal = mapply(dms_to_decimal, str_replace_all(lon, ""[^0-9°′”’\""]"", """"), ifelse(grepl(""W"", lon), ""W"", ""E"")))"
"0",""
"0","# Transformando os pontos em um objeto sf"
"0","fazendas_sf <- st_as_sf(fazendas, coords = c(""lon_decimal"", ""lat_decimal""), crs = 4326)"
"0",""
"0","# Dados do Brasil"
"0","BRA <- ne_states(country = ""Brazil"", returnclass = ""sf"")"
"0",""
"0","# Plotando o mapa com os pontos e a legenda"
"0","gg <- ggplot(BRA) +"
"0","  geom_sf(fill = ""white"", color = ""black"", size = 0.3) +"
"0","  geom_sf_interactive(data = fazendas_sf, aes(color = nome, tooltip = paste(""Nome:"", nome, ""<br>Cidade:"", cidade, ""<br>Coordenadas:"", lat, lon)), size = 3) +"
"0","  theme_minimal() +"
"0","  labs(title = ""Mapa de pontos de coleta dos isolados"","
"0","       color = ""Tratamento/Fazenda"")"
"0",""
"0","# Renderizando o gráfico interativo"
"0","girafe(ggobj = gg)"
